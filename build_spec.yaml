version: 0.1
component: build
timeoutInSeconds: 300
steps:
  - type: Command
    name: "Discover and build functions"
    command: |
      find ./functions/* -type d | xargs -I {} fn build --verbose {}

outputArtifacts:
  - name: enviroRetrieve
    type: DOCKER_IMAGE
    # this location tag doesn't effect the tag used to deliver the container image to the Container Registry
    location: enviroRetrieve:0.0.1
  - name: enviroStore
    type: DOCKER_IMAGE
    # this location tag doesn't effect the tag used to deliver the container image to the Container Registry
    location: enviroStore:0.0.1